{"ast":null,"code":"import gameserver from '../apis/gameserver';\nimport history from '../../src/history';\nimport store from '../index';\nexport const saveUser = (username, token) => {\n  history.push(\"/home\");\n  return {\n    type: \"SAVE_USER\",\n    payload: {\n      username: username,\n      token: token\n    }\n  };\n};\nexport const logoutUser = () => async dispatch => {\n  const sessiontoken = store.getState().user.token;\n  const response = await gameserver.post(\"/logout\", {}, {\n    headers: {\n      token: sessiontoken\n    }\n  });\n\n  if (response.status == \"Success\") {\n    dispatch({\n      type: \"CLEAR_USER\",\n      payload: {}\n    });\n  }\n};\nexport const loadLeaderboards = () => async dispatch => {\n  const response = await gameserver.get('/leaderboard');\n  dispatch({\n    type: \"LOAD_LEADERBOARDS\",\n    payload: {\n      leaderboards: response.data.leaderboards\n    }\n  });\n};\nexport const loadLeaderboardData = leaderboardId => async dispatch => {\n  console.log(\"action :\" + leaderboardId);\n  const response = await gameserver.get('/leaderboard/' + leaderboardId);\n  dispatch({\n    type: \"LOAD_LEADERBOARDS_DATA\",\n    payload: {\n      leaderboardsData: response.data,\n      leaderboardId: leaderboardId\n    }\n  });\n};\nexport const getPlayerLeaderboard = (playerId, leaderboard) => async dispatch => {\n  const username = store.getState().user.username;\n  const sessiontoken = store.getState().user.token;\n  const response = await gameserver.get('/leaderboard/' + leaderboard + \"/\" + username, {\n    headers: {\n      token: sessiontoken\n    }\n  });\n  dispatch({\n    type: \"LOAD_PLAYER_LEADERBOARDS_DATA\",\n    payload: {\n      rank: response.data.rank,\n      scores: response.data.scores,\n      top: response.data.top,\n      aboveAndBelow: response.data.aboveAndBelow\n    }\n  });\n};\nexport const updateScore = (leaderboard, player, score) => async dispatch => {\n  const sessiontoken = store.getState().user.token;\n  console.log(\"sessiontoken \", sessiontoken);\n  const response = await gameserver.post('/leaderboard/' + leaderboard + '/addScore', {\n    name: player,\n    score: score\n  }, {\n    headers: {\n      token: sessiontoken\n    }\n  });\n\n  if (response != null && response.data.statusCode == 0) {\n    dispatch({\n      type: \"UPDATE_SCORE\",\n      payload: {\n        score: score\n      }\n    });\n  } else if (response != null && response.data.statusCode == -1) {\n    dispatch({\n      type: \"SHOW_SCORE_ERROR\",\n      payload: {\n        message: \"error in updating score\"\n      }\n    });\n  }\n};\nexport const pollOpponent = () => async dispatch => {\n  const sessiontoken = store.getState().user.token;\n  const username = store.getState().user.username;\n  const response = await gameserver.post('matchmaking/pollOpponent', {\n    playerName: username\n  }, {\n    headers: {\n      token: sessiontoken\n    }\n  });\n  console.log(response);\n\n  if (response.data.status == \"Success\") {\n    dispatch({\n      type: \"FIND_MATCH\",\n      payload: {\n        status: \"FOUND\",\n        opponentUser: response.data.opponentPlayer,\n        gameId: response.data.gameId\n      }\n    });\n  } else {\n    dispatch({\n      type: \"FIND_MATCH\",\n      payload: {\n        status: \"SEARCHING\",\n        opponentUser: \"\",\n        gameId: \"NA\"\n      }\n    });\n  }\n};\nexport const findOpponent = gameName => async dispatch => {\n  const sessiontoken = store.getState().user.token;\n  const username = store.getState().user.username;\n  const response = await gameserver.post('matchmaking/findOpponent', {\n    playerName: username,\n    gameName: gameName\n  }, {\n    headers: {\n      token: sessiontoken\n    }\n  });\n  console.log(response);\n\n  if (response.data.status == \"Success\") {\n    dispatch({\n      type: \"FIND_MATCH\",\n      payload: {\n        status: \"FOUND\",\n        opponentUser: response.data.opponentPlayer,\n        gameId: response.data.gameId\n      }\n    });\n  } else {\n    dispatch({\n      type: \"FIND_MATCH\",\n      payload: {\n        status: \"SEARCHING\",\n        opponentUser: \"\",\n        gameId: \"NA\"\n      }\n    });\n  }\n};\nexport const updatePvpScore = score => async dispatch => {\n  const sessiontoken = store.getState().user.token;\n  const username = store.getState().user.username;\n  const gameId = store.getState().pvp.gameId;\n  const response = await gameserver.post('matchmaking/updateScore', {\n    playerName: username,\n    gameId: gameId,\n    score: score\n  }, {\n    headers: {\n      token: sessiontoken\n    }\n  });\n  console.log(response);\n  dispatch({\n    type: \"UPDATE_PVP_GAME_SCORES\",\n    payload: {\n      scores: response.data.scores\n    }\n  });\n};\nexport const updateScoresInState = scores => {\n  return {\n    type: \"UPDATE_PVP_GAME_SCORES\",\n    payload: {\n      scores: scores\n    }\n  };\n};\nexport const endGame = () => async dispatch => {\n  const sessiontoken = store.getState().user.token;\n  const username = store.getState().user.username;\n  const gameId = store.getState().pvp.gameId;\n  const response = await gameserver.post('/matchmaking/endGame', {\n    playerName: username,\n    gameId: gameId\n  }, {\n    headers: {\n      token: sessiontoken\n    }\n  });\n  console.log(response);\n\n  if (response.data.status == \"Success\") {\n    dispatch({\n      type: \"END_PVP_GAME\",\n      payload: {\n        winner: response.data.winner\n      }\n    });\n  }\n};\nexport const loadCurrencies = () => async dispatch => {\n  const response = await gameserver.get('/wallet/currencies');\n  console.log(response);\n  dispatch({\n    type: \"LOAD_CURRENCIES\",\n    payload: {\n      currencies: response.data.currencies\n    }\n  });\n};\nexport const loadBalances = (username, usertoken) => async dispatch => {\n  const sessiontoken = store.getState().user.token;\n  console.log(\"sessiontoken \", sessiontoken);\n  const response = await gameserver.post('/wallet/balances', {\n    PlayerName: username\n  }, {\n    headers: {\n      token: sessiontoken\n    }\n  });\n  dispatch({\n    type: \"LOAD_BALANCES\",\n    payload: {\n      balances: response.data.balances\n    }\n  });\n};\nexport const getActiveUsers = () => async dispatch => {\n  const response = await gameserver.get('/activeUsers');\n\n  if (response.data.users) {\n    dispatch({\n      type: \"LOAD_ACTIVE_USERS\",\n      payload: {\n        activeUsers: response.data.users\n      }\n    });\n  }\n};","map":{"version":3,"sources":["/Users/nithin.reddy/Documents/GitHub/react-game/src/actions/useraction.js"],"names":["gameserver","history","store","saveUser","username","token","push","type","payload","logoutUser","dispatch","sessiontoken","getState","user","response","post","headers","status","loadLeaderboards","get","leaderboards","data","loadLeaderboardData","leaderboardId","console","log","leaderboardsData","getPlayerLeaderboard","playerId","leaderboard","rank","scores","top","aboveAndBelow","updateScore","player","score","name","statusCode","message","pollOpponent","playerName","opponentUser","opponentPlayer","gameId","findOpponent","gameName","updatePvpScore","pvp","updateScoresInState","endGame","winner","loadCurrencies","currencies","loadBalances","usertoken","PlayerName","balances","getActiveUsers","users","activeUsers"],"mappings":"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","sourcesContent":["import gameserver from '../apis/gameserver'\nimport history from '../../src/history'\nimport store from '../index'\n\nexport const saveUser = (username, token) => {\n    history.push(\"/home\")\n    return {\n        type : \"SAVE_USER\",\n        payload : {\n            username : username,\n            token : token\n        }\n    }\n}\n\nexport const logoutUser = () => async (dispatch) =>{\n    const sessiontoken = store.getState().user.token\n    const response = await gameserver.post(\"/logout\",{},{\n        headers : { token : sessiontoken }\n    })\n\n    if(response.status == \"Success\"){\n        dispatch({\n            type:\"CLEAR_USER\",\n            payload:{}\n        })\n    }\n}\n\nexport const loadLeaderboards = () => async (dispatch) => {\n    const response = await gameserver.get('/leaderboard')\n    dispatch({\n        type : \"LOAD_LEADERBOARDS\",\n        payload : {\n            leaderboards : response.data.leaderboards\n        }    \n    })    \n}\n\n\nexport const loadLeaderboardData = (leaderboardId) => async (dispatch) =>{\n    console.log(\"action :\"+leaderboardId)\n    const response =  await gameserver.get('/leaderboard/'+leaderboardId)\n    dispatch({\n        type : \"LOAD_LEADERBOARDS_DATA\",\n        payload : {\n            leaderboardsData : response.data,\n            leaderboardId : leaderboardId\n        }    \n    })\n}\n\nexport const getPlayerLeaderboard = (playerId,leaderboard) => async (dispatch) =>{\n    const username = store.getState().user.username\n    const sessiontoken = store.getState().user.token\n\n    const response =  await gameserver.get('/leaderboard/'+leaderboard+\"/\"+username,{\n        headers : {token : sessiontoken}\n    })\n    dispatch({\n        type : \"LOAD_PLAYER_LEADERBOARDS_DATA\",\n        payload : {\n            rank : response.data.rank,\n            scores : response.data.scores,\n            top : response.data.top,\n            aboveAndBelow : response.data.aboveAndBelow\n        }    \n    })\n}\n\nexport const updateScore = (leaderboard,player,score) => async (dispatch) => {\n    const sessiontoken = store.getState().user.token\n    console.log(\"sessiontoken \",sessiontoken)\n    const response = await gameserver.post('/leaderboard/'+leaderboard+'/addScore',\n    {\n        name : player,\n        score : score\n    }\n    ,{\n            headers:{ token : sessiontoken }\n    }\n    )\n\n    if(response != null  && response.data.statusCode == 0){\n        dispatch({\n            type : \"UPDATE_SCORE\",\n            payload : {\n                score : score\n            }\n        })\n    }else if (response != null  && response.data.statusCode == -1){\n        dispatch({\n            type : \"SHOW_SCORE_ERROR\",\n            payload : {\n                message:\"error in updating score\"\n            }\n        })\n    }\n    \n}\nexport const pollOpponent = () => async (dispatch) => {\n    const sessiontoken = store.getState().user.token\n    const username = store.getState().user.username\n\n    const response = await gameserver.post('matchmaking/pollOpponent',{\n        playerName : username\n    },{\n        headers : {\n            token : sessiontoken\n        }\n    })\n\n    console.log(response)\n\n    if(response.data.status == \"Success\"){\n        dispatch({\n            type:\"FIND_MATCH\",\n            payload:{\n                status : \"FOUND\",\n                opponentUser : response.data.opponentPlayer,\n                gameId : response.data.gameId\n            }\n        })\n    }else{\n        dispatch({\n            type:\"FIND_MATCH\",\n            payload:{\n                status : \"SEARCHING\",\n                opponentUser : \"\",\n                gameId:\"NA\"\n            }\n        })\n    }\n}\n\nexport const findOpponent = (gameName) => async (dispatch) => {\n    const sessiontoken = store.getState().user.token\n    const username = store.getState().user.username\n    const response = await gameserver.post('matchmaking/findOpponent',{\n        playerName : username,\n        gameName : gameName\n    },{\n        headers : {\n            token : sessiontoken\n        }\n    })\n\n    console.log(response)\n\n    if(response.data.status == \"Success\"){\n        dispatch({\n            type:\"FIND_MATCH\",\n            payload:{\n                status : \"FOUND\",\n                opponentUser : response.data.opponentPlayer,\n                gameId : response.data.gameId\n            }\n        })\n    }else{\n        dispatch({\n            type:\"FIND_MATCH\",\n            payload:{\n                status : \"SEARCHING\",\n                opponentUser : \"\",\n                gameId : \"NA\"\n            }\n        })\n    }\n    \n}\n\nexport const updatePvpScore = (score) => async (dispatch) => {\n    const sessiontoken = store.getState().user.token\n    const username = store.getState().user.username\n    const gameId = store.getState().pvp.gameId\n    const response = await gameserver.post('matchmaking/updateScore',{\n        playerName : username,\n        gameId : gameId,\n        score : score\n    },{\n        headers : { token : sessiontoken}\n    })\n    \n    console.log(response);\n\n    dispatch({\n        type : \"UPDATE_PVP_GAME_SCORES\",\n        payload : {\n            scores : response.data.scores\n        }\n    })\n}\n\nexport const updateScoresInState = (scores) => {\n    return {\n        type : \"UPDATE_PVP_GAME_SCORES\",\n        payload : {\n            scores : scores\n        }\n    }\n}\n\nexport const endGame = () => async (dispatch) => {\n    const sessiontoken = store.getState().user.token\n    const username = store.getState().user.username\n    const gameId = store.getState().pvp.gameId\n\n    const response = await gameserver.post('/matchmaking/endGame',{\n        playerName : username,\n        gameId : gameId\n    },{\n        headers:{token : sessiontoken}\n    })\n\n    console.log(response)\n\n    if(response.data.status == \"Success\"){\n        dispatch({\n            type:\"END_PVP_GAME\",\n            payload:{\n                winner : response.data.winner\n            }\n        })\n    }\n\n}\n\nexport const loadCurrencies  = () => async (dispatch) => {\n    const response = await gameserver.get('/wallet/currencies')\n    console.log(response)\n    dispatch({\n        type : \"LOAD_CURRENCIES\",\n        payload : {\n            currencies : response.data.currencies\n        }\n    })\n}\n\nexport const loadBalances = (username,usertoken) => async (dispatch) => {\n    const sessiontoken = store.getState().user.token\n    console.log(\"sessiontoken \",sessiontoken)\n    const response = await gameserver.post('/wallet/balances',{\n        PlayerName : username\n    },\n    {\n        headers:{ token : sessiontoken }\n    })\n\n    dispatch({\n        type : \"LOAD_BALANCES\",\n        payload : {\n           balances : response.data.balances\n        }\n    })\n\n}\n\nexport const getActiveUsers = () => async (dispatch) => {\n    const response = await gameserver.get('/activeUsers')\n    if(response.data.users){\n        dispatch({\n            type : \"LOAD_ACTIVE_USERS\",\n            payload : {\n                activeUsers : response.data.users\n            }\n        })\n    }\n    \n}"]},"metadata":{},"sourceType":"module"}