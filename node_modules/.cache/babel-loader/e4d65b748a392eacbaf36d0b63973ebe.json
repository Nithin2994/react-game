{"ast":null,"code":"import _toConsumableArray from\"/Users/nithin.reddy/Documents/GitHub/react-game/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/nithin.reddy/Documents/GitHub/react-game/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/nithin.reddy/Documents/GitHub/react-game/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/nithin.reddy/Documents/GitHub/react-game/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/nithin.reddy/Documents/GitHub/react-game/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{connect}from'react-redux';import Home from'./home';import Index from'./index';import Modal from'./modal';import{Row,Col,Navbar,Button,Form}from'react-bootstrap';var ChatComponent=/*#__PURE__*/function(_React$Component){_inherits(ChatComponent,_React$Component);var _super=_createSuper(ChatComponent);function ChatComponent(){var _this;_classCallCheck(this,ChatComponent);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={message:{},othersMessage:[]};_this.sendMessage=function(){_this.ws.send(JSON.stringify(_this.state.message));_this.setState({othersMessage:[].concat(_toConsumableArray(_this.state.othersMessage),[_this.state.message])});};_this.onChangeHandler=function(event){console.log(event.target.value);_this.setState({message:{sender:_this.props.username,recipient:_this.props.match.params.to,content:event.target.value}});};_this.renderComponent=function(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Navbar,{bg:\"dark\",variant:\"dark\"},/*#__PURE__*/React.createElement(Navbar.Brand,{href:\"#home\"},_this.props.match.params.to)),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"div\",{style:{overflow:\"scroll\",width:\"100%\",height:\"60vh\",display:\"block\"}},_this.state.othersMessage.map(function(mes){return mes.sender==_this.props.username?/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"p\",{className:\"msg_cotainer_right\"},mes.content))):/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"p\",{className:\"msg_cotainer_left\"},mes.content)),/*#__PURE__*/React.createElement(Col,null));}))),/*#__PURE__*/React.createElement(Navbar,{bg:\"dark\",variant:\"dark\"},/*#__PURE__*/React.createElement(Form.Control,{style:{width:\"95%\"},type:\"text\",name:\"message\",onChange:_this.onChangeHandler}),/*#__PURE__*/React.createElement(Button,{style:{marginLeft:\"1%\"},onClick:_this.sendMessage},\"Send\")));};return _this;}_createClass(ChatComponent,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;console.log(\"chat\",this.props.username);this.ws=new WebSocket('ws://localhost:8081/chat/'+this.props.username);this.ws.addEventListener(\"message\",function(mes){console.log(\"res\",mes);_this2.setState({othersMessage:[].concat(_toConsumableArray(_this2.state.othersMessage),[JSON.parse(mes.data)])});});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,this.renderComponent());}}]);return ChatComponent;}(React.Component);var mapStateFromProps=function mapStateFromProps(state){return{username:state.user.username};};export default connect(mapStateFromProps)(ChatComponent);","map":{"version":3,"sources":["/Users/nithin.reddy/Documents/GitHub/react-game/src/components/chat.js"],"names":["React","connect","Home","Index","Modal","Row","Col","Navbar","Button","Form","ChatComponent","state","message","othersMessage","sendMessage","ws","send","JSON","stringify","setState","onChangeHandler","event","console","log","target","value","sender","props","username","recipient","match","params","to","content","renderComponent","overflow","width","height","display","map","mes","marginLeft","WebSocket","addEventListener","parse","data","Component","mapStateFromProps","user"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {connect} from 'react-redux'\nimport Home from './home'\nimport Index from './index'\nimport Modal from './modal'\nimport {Row,Col,Navbar, Button, Form} from 'react-bootstrap'\n\nclass ChatComponent extends React.Component{\n\n    state = {\n        message : {},\n        othersMessage : []\n    }\n\n    componentDidMount(){\n        console.log(\"chat\",this.props.username)\n        this.ws = new WebSocket('ws://localhost:8081/chat/'+this.props.username);\n\n        this.ws.addEventListener(\"message\",(mes)=>{\n            console.log(\"res\",mes)\n            this.setState({\n                othersMessage : [...this.state.othersMessage, JSON.parse(mes.data)]\n            })\n        })\n    }\n\n    sendMessage = () =>{\n        this.ws.send(JSON.stringify(this.state.message));\n        this.setState({\n            othersMessage : [...this.state.othersMessage, this.state.message]\n        })\n    }\n\n    onChangeHandler = (event) => {\n        console.log(event.target.value)\n        this.setState({\n            message : {\n                sender : this.props.username,\n                recipient : this.props.match.params.to,\n                content : event.target.value\n            }\n        })\n        \n    }\n\n    renderComponent = () => {\n        return <div>\n            <Navbar bg=\"dark\" variant=\"dark\">\n                <Navbar.Brand href=\"#home\">{this.props.match.params.to}</Navbar.Brand>\n            </Navbar>\n            <Row>\n            <div style={{overflow:\"scroll\",width:\"100%\",height:\"60vh\",display:\"block\"}}>\n            {this.state.othersMessage.map((mes)=>{\n                    return mes.sender == this.props.username ?  \n                        <Row><Col></Col><Col><p className={\"msg_cotainer_right\"}>{mes.content}</p></Col></Row>: \n                        <Row><Col><p className={\"msg_cotainer_left\"}>{mes.content}</p></Col><Col></Col></Row>\n                })}\n            </div>\n            </Row>\n            <Navbar bg=\"dark\" variant=\"dark\">\n                <Form.Control style={{width:\"95%\"}} type=\"text\" name=\"message\" onChange={this.onChangeHandler}/>\n                <Button style={{marginLeft:\"1%\"}} onClick={this.sendMessage}>Send</Button>\n            </Navbar>\n            </div>\n            \n    }\n\n    render(){\n        return (\n            <div>\n                {/* <Modal /> */}\n                {this.renderComponent()}\n            </div>\n        )\n    }\n}\n\nconst mapStateFromProps = (state) => {\n    return {\n        username : state.user.username\n    }\n}\n\nexport default connect(mapStateFromProps)(ChatComponent)"]},"metadata":{},"sourceType":"module"}